(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31555,e=>{"use strict";var t=e.i(18050),a=e.i(71645),n=e.i(95187),r=(0,n.createServerReference)("40802d964a6a127943dbd1d5f636967825caeed92d",n.callServer,void 0,n.findSourceMapURL,"createMemo"),s=e.i(19455),i=e.i(82735),o=e.i(75254);let l=(0,o.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);var d=e.i(37727),c=e.i(94008);let u=(0,o.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var m=e.i(68692);function h({categoryId:e,onCreated:n}){let[o,h]=(0,a.useState)(""),[f,x]=(0,a.useState)(""),[g,p]=(0,a.useState)([]),[b,v]=(0,a.useState)(!1),y=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=[];return g.forEach(t=>{t.type.startsWith("image/")&&e.push(URL.createObjectURL(t))}),()=>{e.forEach(e=>URL.revokeObjectURL(e))}},[g]);let w=async t=>{if(t?.preventDefault(),!o.trim()&&0===g.length&&!f.trim()||b)return;v(!0);let a=new FormData;a.append("content",o),f.trim()&&a.append("title",f.trim()),a.append("categoryId",e),g.forEach(e=>a.append("files",e));try{await r(a),h(""),x(""),p([]),n?.()}catch(e){console.error(e)}finally{v(!1)}};return(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[g.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 px-2 pb-2",children:g.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-muted rounded-md px-2 py-1.5 text-xs text-muted-foreground border relative group",children:[e.type.startsWith("image/")?(0,t.jsx)("img",{src:URL.createObjectURL(e),alt:e.name,className:"h-8 w-8 object-cover rounded shadow-sm"}):e.type.startsWith("video/")?(0,t.jsxs)("div",{className:"h-8 w-8 bg-black/10 flex items-center justify-center rounded shadow-sm text-foreground",children:[(0,t.jsx)(u,{className:"h-4 w-4 hidden"})," ",(0,t.jsx)(l,{className:"h-4 w-4 hidden"}),(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-film",children:[(0,t.jsx)("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),(0,t.jsx)("path",{d:"M7 3v18"}),(0,t.jsx)("path",{d:"M3 7.5h4"}),(0,t.jsx)("path",{d:"M3 12h18"}),(0,t.jsx)("path",{d:"M3 16.5h4"}),(0,t.jsx)("path",{d:"M17 3v18"}),(0,t.jsx)("path",{d:"M17 7.5h4"}),(0,t.jsx)("path",{d:"M17 16.5h4"})]})]}):e.type.startsWith("audio/")?(0,t.jsx)("div",{className:"h-8 w-8 bg-primary/10 flex items-center justify-center rounded shadow-sm text-primary",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-music",children:[(0,t.jsx)("path",{d:"M9 18V5l12-2v13"}),(0,t.jsx)("circle",{cx:"6",cy:"18",r:"3"}),(0,t.jsx)("circle",{cx:"18",cy:"16",r:"3"})]})}):(0,t.jsx)(c.File,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"max-w-[150px] truncate",children:e.name}),(0,t.jsx)("button",{type:"button",onClick:()=>{p(g.filter((e,t)=>t!==a))},className:"ml-1 hover:text-foreground text-muted-foreground/50 transition-colors",children:(0,t.jsx)(d.X,{className:"h-3 w-3"})})]},a))}),(0,t.jsx)("div",{className:"relative flex flex-col gap-0 bg-muted/30 rounded-xl border focus-within:ring-1 focus-within:ring-ring transition-all overflow-hidden mt-0",children:(0,t.jsxs)("form",{onSubmit:w,children:[(0,t.jsx)("input",{type:"text",value:f,onChange:e=>x(e.target.value),placeholder:"Title (Optional)",className:"px-4 pt-3 pb-1 bg-transparent border-0 focus:ring-0 text-sm font-bold text-foreground placeholder:text-muted-foreground/50 w-full focus:outline-none",disabled:b}),(0,t.jsxs)("div",{className:"flex items-end gap-2 p-2 pt-0",children:[(0,t.jsx)("input",{type:"file",multiple:!0,className:"hidden",ref:y,onChange:e=>{e.target.files&&e.target.files.length>0&&p(t=>[...t,...Array.from(e.target.files)])},onClick:e=>{e.target.value=""}}),(0,t.jsxs)(s.Button,{type:"button",size:"icon",variant:"ghost",disabled:b,className:"rounded-full h-9 w-9 text-muted-foreground hover:text-foreground shrink-0 mb-0.5",onClick:()=>y.current?.click(),children:[(0,t.jsx)(i.Paperclip,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Attach file"})]}),(0,t.jsx)(m.MarkdownInput,{value:o,onChange:e=>h(e),onPaste:e=>{if(e.clipboardData.files.length>0){let t=Array.from(e.clipboardData.files).filter(e=>e.type.startsWith("image/"));t.length>0&&(e.preventDefault(),p(e=>[...e,...t]))}},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||e.nativeEvent.isComposing||(e.preventDefault(),w())},placeholder:f?"Message...":"Message (hold Shift + Enter for new line)",className:"w-full"}),(0,t.jsxs)(s.Button,{type:"submit",size:"icon",disabled:b||!o.trim()&&0===g.length,className:"rounded-full h-9 w-9 shrink-0 mb-0.5",variant:o.trim()||g.length>0?"default":"secondary",children:[(0,t.jsx)(l,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Send"})]})]})]})})]})}var f=e.i(59684);let x=(0,o.default)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),g=(0,o.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);var p=e.i(75157),b=e.i(26999),v=e.i(95926);function y({...e}){return(0,t.jsx)(b.Root,{"data-slot":"sheet",...e})}function w({...e}){return(0,t.jsx)(b.Trigger,{"data-slot":"sheet-trigger",...e})}function j({...e}){return(0,t.jsx)(b.Portal,{"data-slot":"sheet-portal",...e})}function N({className:e,...a}){return(0,t.jsx)(b.Overlay,{"data-slot":"sheet-overlay",className:(0,p.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function M({className:e,children:a,side:n="right",...r}){return(0,t.jsxs)(j,{children:[(0,t.jsx)(N,{}),(0,t.jsxs)(b.Content,{"data-slot":"sheet-content",className:(0,p.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===n&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===n&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===n&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===n&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...r,children:[a,(0,t.jsxs)(b.Close,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,t.jsx)(v.XIcon,{className:"size-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function k({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"sheet-header",className:(0,p.cn)("flex flex-col gap-1.5 p-4",e),...a})}function S({className:e,...a}){return(0,t.jsx)(b.Title,{"data-slot":"sheet-title",className:(0,p.cn)("text-foreground font-semibold",e),...a})}var C=e.i(40433);let W=(0,o.default)("arrow-down-to-line",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);var D=e.i(18789),P=e.i(22016),T=e.i(92471),A=e.i(66955),L=e.i(65620);function F(e){let t=e.match(/(https?:\/\/[^\s]+)/g);return t?Array.from(new Set(t.map(e=>e.replace(/[.,;!?)]+$/,"")))):[]}function z({memos:e}){let[n,r]=(0,a.useState)(!1),i=e.filter(e=>e.isPinned);return(0,t.jsxs)(y,{open:n,onOpenChange:r,children:[(0,t.jsx)(w,{asChild:!0,children:(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",children:(0,t.jsx)(C.Pin,{className:"h-4 w-4"})})}),(0,t.jsxs)(M,{className:"overflow-y-auto w-[400px] sm:w-[540px]",children:[(0,t.jsx)(k,{children:(0,t.jsx)(S,{children:"Pinned Messages"})}),(0,t.jsx)("div",{className:"mt-4 flex flex-col gap-4 px-[5px]",children:0===i.length?(0,t.jsx)("div",{className:"text-center text-muted-foreground text-sm italic py-10",children:"No pinned messages in this channel."}):i.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden flex flex-col",children:[(0,t.jsxs)(P.default,{href:`?memoId=${e.id}`,className:"block p-3 hover:bg-muted/50 transition-colors text-sm flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"font-bold text-xs truncate max-w-[200px]",children:e.title||"No Title"}),(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,t.jsx)("div",{className:"text-muted-foreground [&>p]:mb-1 mb-2",children:(0,t.jsx)(D.default,{components:{a:({node:e,...n})=>{let r=a.default.Children.toArray(n.children);return 1===r.length&&r[0]===n.href?null:(0,t.jsx)("span",{className:"text-primary underline",...n})}},children:e.content})}),e.attachments.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-1 mb-2",children:e.attachments.map(e=>(0,t.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,t.jsx)(T.FilePreview,{attachment:e})},e.id))}),F(e.content).length>0&&(0,t.jsx)("div",{className:"mt-2 space-y-2",children:F(e.content).map(e=>{let a,n=(a=e.match(/^https?:\/\/(?:www\.)?(?:twitter|x)\.com\/\w+\/status\/(\d+)/))?a[1]:null;return n?(0,t.jsx)(L.TweetPreview,{id:n},e):(0,t.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,t.jsx)(A.LinkPreview,{url:e})},e)})})]}),(0,t.jsx)("div",{className:"p-2 border-t bg-muted/20 flex justify-end",children:(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",className:"gap-2 h-7 text-xs",onClick:()=>{var t;return t=e.id,void(r(!1),setTimeout(()=>{let e=document.getElementById(`memo-${t}`);e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("ring-2","ring-primary","ring-offset-2"),setTimeout(()=>{e.classList.remove("ring-2","ring-primary","ring-offset-2")},2e3))},100))},children:[(0,t.jsx)(W,{className:"h-3.5 w-3.5"}),"Jump to Memo"]})})]},e.id))})]})]})}var R=e.i(75019),E=(0,n.createServerReference)("607c4c64c68b111fc49d37ac5d1c8fe27557b1b294",n.callServer,void 0,n.findSourceMapURL,"saveWorkspaceSetting"),X=(0,n.createServerReference)("4009b196b472a3672337864e4213ada69b5c6cf7ee",n.callServer,void 0,n.findSourceMapURL,"searchMemos"),B=e.i(18566),O=e.i(93479),I=e.i(55436);let U=(0,o.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var Y=e.i(27025);let q=(0,o.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var H=e.i(7240);function J({category:e,initialMemos:n,initialViewMode:r="list",readOnly:i=!1}){let o=(0,B.useRouter)(),[l,d]=(0,a.useState)(r),[c,u]=(0,a.useState)(new Set),m=(0,a.useRef)(null);(0,a.useRef)(!0);let[b,v]=(0,a.useState)(""),[y,w]=(0,a.useState)("current"),[j,N]=(0,a.useState)([]),[M,k]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=setTimeout(async()=>{if(!b.trim())return void N([]);if("current"===y){let e=b.toLowerCase();N(n.filter(t=>!e||t.content.toLowerCase().includes(e)||t.title&&t.title.toLowerCase().includes(e)||t.tags.some(t=>t.name.toLowerCase().includes(e))||t.embeds&&t.embeds.some(t=>t.title&&t.title.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)||t.siteName&&t.siteName.toLowerCase().includes(e))))}else{k(!0);try{let e=await X(b);N(e)}catch(e){console.error("Search failed",e)}finally{k(!1)}}},300);return()=>clearTimeout(e)},[b,y,n]),(0,a.useEffect)(()=>{if(window.location.hash){let e=window.location.hash.substring(1);if(e.startsWith("memo-")){let t=document.getElementById(e);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("bg-primary/20","rounded-lg","transition-colors","duration-1000"),setTimeout(()=>{t.classList.remove("bg-primary/20")},2e3))}}},[n,o]);let S=!!b.trim(),C=S?j:n,W=async e=>{d(e),await E("viewMode",e)},[D,P]=(0,a.useState)(1);(0,a.useEffect)(()=>{let e=()=>{window.innerWidth>=1280?P(3):window.innerWidth>=768?P(2):P(1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let T=a.default.useMemo(()=>{if("list"===l)return[C];let e=Array.from({length:D},()=>[]),t=Array(D).fill(0);return C.forEach(a=>{let n,r,s=0,i=t[0];for(let e=1;e<D;e++)t[e]<i&&(i=t[e],s=e);e[s].push(a),t[s]+=(n=100+20*Math.ceil((a.content?.length||0)/50),a.attachments?.length&&(n+=200*a.attachments.length),(r=a.content?.match(/(https?:\/\/[^\s]+)/g))&&(n+=300*r.length),n)}),e},[C,D,l]);return(0,t.jsxs)("div",{className:"flex flex-col h-full bg-background/50 backdrop-blur-sm",children:[(0,t.jsxs)(H.DraggableHeader,{className:"h-14 border-b flex items-center justify-between px-4 shrink-0 shadow-sm bg-background/80 backdrop-blur z-10 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 font-bold text-lg shrink-0",children:[(0,t.jsx)("span",{className:"text-muted-foreground text-2xl",children:"#"}),e.name]}),(0,t.jsxs)("div",{className:"flex-1 max-w-md relative flex items-center gap-2 no-drag",style:{WebkitAppRegion:"no-drag"},children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(I.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(O.Input,{placeholder:i?"Search all memos...":"Search memos...",className:"pl-9 h-9 bg-background/50",value:b,onChange:e=>v(e.target.value)})]}),b&&!i&&(0,t.jsxs)("div",{className:"flex items-center border rounded-md overflow-hidden shrink-0",children:[(0,t.jsxs)("button",{onClick:()=>w("current"),className:(0,p.cn)("px-2 py-1.5 text-xs font-medium transition-colors flex items-center gap-1","current"===y?"bg-primary text-primary-foreground":"hover:bg-muted"),title:"Current Channel",children:[(0,t.jsx)(Y.Folder,{className:"h-3 w-3"}),"Current"]}),(0,t.jsx)("div",{className:"w-[1px] bg-border h-full"}),(0,t.jsxs)("button",{onClick:()=>w("all"),className:(0,p.cn)("px-2 py-1.5 text-xs font-medium transition-colors flex items-center gap-1","all"===y?"bg-primary text-primary-foreground":"hover:bg-muted"),title:"All Channels",children:[(0,t.jsx)(U,{className:"h-3 w-3"}),"All"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 shrink-0 no-drag",style:{WebkitAppRegion:"no-drag"},children:[(0,t.jsx)(z,{memos:n}),(0,t.jsxs)("div",{className:"bg-muted/50 p-1 rounded-md flex space-x-1",children:[(0,t.jsx)(s.Button,{variant:"list"===l?"secondary":"ghost",size:"icon",className:"h-7 w-7",onClick:()=>W("list"),children:(0,t.jsx)(g,{className:"h-4 w-4"})}),(0,t.jsx)(s.Button,{variant:"grid"===l?"secondary":"ghost",size:"icon",className:"h-7 w-7",onClick:()=>W("grid"),children:(0,t.jsx)(x,{className:"h-4 w-4"})})]})]})]}),(0,t.jsx)(f.ScrollArea,{className:"flex-1 min-h-0",children:(0,t.jsxs)("div",{className:"p-4 pb-4",children:[!S&&0===n.length&&(0,t.jsxs)("div",{className:"text-center text-muted-foreground py-20",children:[(0,t.jsx)("div",{className:"text-lg font-medium mb-2",children:"No memos yet"}),(0,t.jsx)("div",{className:"text-sm",children:i?"Your timeline is empty.":`Be the first to create a memo in #${e.name}!`})]}),S&&0===j.length&&!M&&(0,t.jsxs)("div",{className:"text-center text-muted-foreground py-20",children:[(0,t.jsx)("div",{className:"text-lg font-medium mb-2",children:"No results found"}),(0,t.jsx)("div",{className:"text-sm",children:"Try a different query"})]}),(0,t.jsx)("div",{className:(0,p.cn)("flex gap-4","list"===l?"flex-col":"flex-row items-start"),children:T.map((a,n)=>(0,t.jsx)("div",{className:"flex-1 flex flex-col gap-4 min-w-0",children:a.map(a=>(0,t.jsxs)("div",{id:`memo-${a.id}`,className:"relative group/memo-wrapper",children:[(i||S&&"all"===y&&a.categoryId!==e.id)&&(0,t.jsxs)("div",{className:"mb-1 flex items-center justify-between px-1",children:[(0,t.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1 bg-muted/50 px-1.5 py-0.5 rounded",children:[(0,t.jsx)(Y.Folder,{className:"h-3 w-3"}),a.category?.name||"Unknown Channel"]}),(0,t.jsxs)(s.Button,{size:"sm",variant:"ghost",className:"h-6 gap-1 text-xs",onClick:()=>o.push(`/category/${a.categoryId}#memo-${a.id}`),children:["Go to Channel ",(0,t.jsx)(q,{className:"h-3 w-3"})]})]}),(0,t.jsx)(R.MemoItem,{memo:a,viewMode:l,onEditChange:e=>{var t;return t=a.id,void u(a=>{let n=new Set(a);return e?n.add(t):n.delete(t),n})},readOnly:i})]},a.id))},n))}),(0,t.jsx)("div",{ref:m})]})}),0===c.size&&!S&&!i&&(0,t.jsx)("div",{className:"p-4 bg-background border-t",children:(0,t.jsx)(h,{categoryId:e.id,onCreated:()=>{setTimeout(()=>{m.current?.scrollIntoView({behavior:"smooth"})},100)}})})]})}e.s(["MemoListContainer",()=>J],31555)},1930,e=>{"use strict";var t,a=e.i(18050),n=e.i(22016),r=e.i(75157);function s({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function i({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function o({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...t})}function l({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...t})}var d=e.i(88081),c=e.i(27025),u=e.i(78583);let m=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),h=Symbol.for("constructDateFrom");function f(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&h in e?e[h](t):e instanceof Date?new e.constructor(t):new Date(t)}let x={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function g(e){return (t={})=>{let a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}let p={date:g({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:g({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:g({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},b={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function v(e){return(t,a)=>{let n;if("formatting"===(a?.context?String(a.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,r=a?.width?String(a.width):t;n=e.formattingValues[r]||e.formattingValues[t]}else{let t=e.defaultWidth,r=a?.width?String(a.width):e.defaultWidth;n=e.values[r]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function y(e){return(t,a={})=>{let n,r=a.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;let o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(l)?function(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a}(l,e=>e.test(o)):function(e,t){for(let a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a}(l,e=>e.test(o));return n=e.valueCallback?e.valueCallback(d):d,{value:n=a.valueCallback?a.valueCallback(n):n,rest:t.slice(o.length)}}}let w={code:"en-US",formatDistance:(e,t,a)=>{let n,r=x[e];if(n="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),a?.addSuffix)if(a.comparison&&a.comparison>0)return"in "+n;else return n+" ago";return n},formatLong:p,formatRelative:(e,t,a,n)=>b[e],localize:{ordinalNumber:(e,t)=>{let a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},era:v({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:v({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:v({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:v({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:v({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(t={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,a={})=>{let n=e.match(t.matchPattern);if(!n)return null;let r=n[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];return{value:i=a.valueCallback?a.valueCallback(i):i,rest:e.slice(r.length)}}),era:y({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:y({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:y({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:y({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:y({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},j={};function N(e,t){return f(t||e,e)}function M(e){let t=N(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),e-a}function k(e,...t){let a=f.bind(null,e||t.find(e=>"object"==typeof e));return t.map(a)}function S(e,t){let a=N(e)-N(t);return a<0?-1:a>0?1:a}function C({currentCategory:e,subCategories:t}){return 0===t.length?(0,a.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center text-muted-foreground bg-muted/20 h-full",children:(0,a.jsxs)("div",{className:"max-w-md space-y-4",children:[(0,a.jsx)(c.Folder,{className:"h-12 w-12 mx-auto opacity-50"}),(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Empty Folder"}),(0,a.jsx)("p",{className:"text-sm",children:"This folder has no channels. Create a channel inside it to get started."})]})}):(0,a.jsxs)("div",{className:"flex flex-col h-full bg-background/50 backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"h-14 border-b flex items-center px-4 shrink-0 shadow-sm bg-background/80 backdrop-blur z-10 gap-2",children:[(0,a.jsx)(c.Folder,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-bold text-lg",children:e.name}),(0,a.jsxs)("span",{className:"text-muted-foreground text-sm ml-2",children:["(",t.length," channels)"]})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>{var t,r;return(0,a.jsx)(n.default,{href:`/category/${e.id}`,className:"block group",children:(0,a.jsxs)(s,{className:"h-full transition-all hover:shadow-md hover:border-primary/50 group-hover:-translate-y-0.5",children:[(0,a.jsx)(i,{className:"pb-2 space-y-0 relative",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(o,{className:"text-base font-medium flex items-center gap-2",children:["folder"===e.icon?(0,a.jsx)(c.Folder,{className:"h-4 w-4"}):(0,a.jsx)(d.Hash,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"truncate",children:e.name})]}),e.latestMemo&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground whitespace-nowrap flex items-center gap-1",children:[(0,a.jsx)(m,{className:"h-3 w-3"}),(t=new Date(e.latestMemo.createdAt),r={addSuffix:!0},function(e,t,a){var n;let r,s=a?.locale??j.locale??w,i=S(e,t);if(isNaN(i))throw RangeError("Invalid time value");let o=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:i}),[l,d]=k(a?.in,...i>0?[t,e]:[e,t]),c=(n=void 0,e=>{let t=(n?Math[n]:Math.trunc)(e);return 0===t?0:t})((N(d)-N(l))/1e3),u=Math.round((c-(M(d)-M(l))/1e3)/60);if(u<2)if(a?.includeSeconds)if(c<5)return s.formatDistance("lessThanXSeconds",5,o);else if(c<10)return s.formatDistance("lessThanXSeconds",10,o);else if(c<20)return s.formatDistance("lessThanXSeconds",20,o);else if(c<40)return s.formatDistance("halfAMinute",0,o);else if(c<60)return s.formatDistance("lessThanXMinutes",1,o);else return s.formatDistance("xMinutes",1,o);else if(0===u)return s.formatDistance("lessThanXMinutes",1,o);else return s.formatDistance("xMinutes",u,o);if(u<45)return s.formatDistance("xMinutes",u,o);if(u<90)return s.formatDistance("aboutXHours",1,o);if(u<1440){let e=Math.round(u/60);return s.formatDistance("aboutXHours",e,o)}if(u<2520)return s.formatDistance("xDays",1,o);else if(u<43200){let e=Math.round(u/1440);return s.formatDistance("xDays",e,o)}else if(u<86400)return r=Math.round(u/43200),s.formatDistance("aboutXMonths",r,o);if((r=function(e,t,a){var n,r;let s,i,o,l,[d,c,u]=k(void 0,e,e,t),m=S(c,u),h=Math.abs(function(e,t,a){let[n,r]=k(void 0,e,t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(c,u));if(h<1)return 0;1===c.getMonth()&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-m*h);let f=S(c,u)===-m;+(s=N(d,void 0),n=void 0,(i=N(s,n?.in)).setHours(23,59,59,999),i)==+(r=void 0,l=(o=N(s,r?.in)).getMonth(),o.setFullYear(o.getFullYear(),l+1,0),o.setHours(23,59,59,999),o)&&1===h&&1===S(d,u)&&(f=!1);let x=m*(h-f);return 0===x?0:x}(d,l))<12){let e=Math.round(u/43200);return s.formatDistance("xMonths",e,o)}{let e=r%12,t=Math.trunc(r/12);return e<3?s.formatDistance("aboutXYears",t,o):e<9?s.formatDistance("overXYears",t,o):s.formatDistance("almostXYears",t+1,o)}}(t,f(t,Date.now()),r))]})]})}),(0,a.jsx)(l,{children:e.latestMemo?(0,a.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-3 break-words text-left",children:e.latestMemo.content||(0,a.jsx)("span",{className:"italic opacity-70",children:e.latestMemo.attachments?.length?`${e.latestMemo.attachments.length} attachment(s)`:"No text content"})}):(0,a.jsxs)("div",{className:"text-sm text-muted-foreground/50 italic flex items-center gap-2 h-[4.5rem]",children:[(0,a.jsx)(u.FileText,{className:"h-4 w-4"}),"No memos yet"]})})]})},e.id)})})})]})}e.s(["FolderOverview",()=>C],1930)}]);